<html>
	<head>
		<link href="../js/css/jquery-ui/jquery.css" rel="stylesheet" />
		<link href="../js/css/rameses-lib.css" rel="stylesheet" />
		
		<script src="../js/jquery-all.js"></script>
		<script src="../js/rameses-ext-lib.js"></script>
		<script src="../js/rameses-ui.js"></script>

		<style>
			body { text-align: center; background: #eee; }
			ol, ul {margin:0px; padding:0px;}
			ol li, ul li {list-style-position:inside;}
			
			.wrapper {
				background: #fff;
				border: solid 3px #369;
				box-shadow: 0px 5px 15px #aaa;
				padding: 20px;
				text-align: left;
				width: 800px;
				margin: 0px auto;
			}
			
			.ui-dialog {
				border: solid 5px #369;
				box-shadow: 0px 4px 10px #369;
			}
			.ui-dialog-titlebar { display: none; }
			
			input { margin: 3px 0px; font-size: 1.5em; border: solid 1px #ccc; }
			span.hint { font-size: 1.5em; }
			
			ul li.selected { background: green; }
		</style>
		
		<script>
			Registry.add({id:'news_panel', context:'news_panel', page:'test/news_panel.html'});
			Registry.add({id:'popup', context:'popup', page:'test/popup.html'});
			
			//default global settings for PopupOpener
			PopupOpener.options = {show: '', hide: 'fade', resizable: false};
		
			$put(
				'test',
				new function() {

					var self = this;
					this._controller;
					
					this.itemCode;
					this.item;
					this.theme;
					this.entity = {};

					this.items = [
						{code: 'bn', caption: 'Banana'},
						{code: 'wm', caption: 'Watermelon'},
						{code: 'ap', caption: 'Apple'},
						{code: 'or', caption: 'Orange'},
						{code: 'ma', caption: 'Mango'}
					];

					this.showSelected = function(){
						alert('selected is code ' + this.itemCode + '\nselected object is [code=#{code}, caption=#{caption}]'.evaluate(this.item) );
					};

					this.change = function() {
						return new PopupOpener('popup', {item:this.theme, handler:function(theme){
							self.theme = theme;
							this._controller.refresh();
						}}, {width: '300', height: '400'});
					}
				},
				{
					'default' : 'test/page1.html',
					'page2' : 'test/page2.html'
				}
			);
		</script>
	</head>

	<body>
		<div class="wrapper">
			<div>
				<label r:context="test">Theme: #{theme}</label>
				<button r:context="test" r:name="change">Change</button>
				<input type="image" r:context="test" r:name="change" src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBhQSEBUUEhIQFBIWFRQWFBIUFhQVFBkXFBAXFRUXEhgXHCYeFxkoHBQVHy8gJSgpLCwuFh4xNTAqNSYrLCkBCQoKDgwNFw8PGikkHB8pLTU1LCksKSw1KSwpKyk1LCksKik1KiosKSs1NSopMCopNTUsKTUyLCkpLDYsKS0tLP/AABEIAGYAZgMBIgACEQEDEQH/xAAcAAABBAMBAAAAAAAAAAAAAAAAAwQGBwECBQj/xABBEAABAwIBBwgIBAMJAAAAAAABAAIDBBEhBQYTMUFRYQcSIkJxgZGhMlJicrHB0fAjM0OCkqLhFBUWY3OTsrPx/8QAGgEAAgMBAQAAAAAAAAAAAAAAAAQBAwYFAv/EACQRAAICAgICAQUBAAAAAAAAAAABAgMEERJBITEFMlFxsfAj/9oADAMBAAIRAxEAPwC8UIWCbIAykZKoA2F3HcFoSX6sG79pUSzj5RoKUFsPNe4YF5P4YPaMXngPFHsCWFsjtZDRwxKY1NbTs/MqWX3GRt/AYqqKjOCtrTcuc2M7ZLsZb2Ym2Lu9L0uQ/Xkkcdwsxvg3HzTccSyXl+PyJzzaoPW9/gsf+9qI/rt/iP0TqnEb/wAmpudweHeV1XjaBrRgPEk/FJPitqXt4U+mipfI19plnGSePWGyN4YOS1JlJkmANnbWnAqvsm52TQkDnlzfVfdw7jrCllLXQ1gH6c2sY49rT1h5pWyqdb1JDld0LVuD2SBC5FPlF0TxHUbfQl2Hg7cfviuuqy0EIQgATZx55t1Rr4lb1UlhYazgFEeUTOIUtNomus97SXEaxGMHW4uPRHej2BHuULlC1wU5PMvzehrkOotbbUzjt7NcRyZkm7hJPZ8nVb1GcGjUTxTHJMRe4zP9I4MHqt4ffxXfhcu9jYqrjyfszuZmOyThH0jpQp/CuZFInTJVfJCkWPZCEymW7pk2lkUJEyY2mSdLlF0Tri5F72vbvadhWZnphM5WOCmuMl4KlZKuXKL0y1ci5WZWQ6OQhxI6LtRNvg8J7kircyQ08p6QF43es36j5HcqmyBlkwTC5sxxFz6p2OHz4K0spNM9OJmYTRdIW3txcOwjFcDJx3RPXT9GmxMlZFe+17JAhNsm1omiZINThfsOojxuhLDZgdKU7mjzKorlDysamsLQei55/wBuM81vjZxV01FRzKeok2gSEftabLz5UuvVv9hrWjwH9U3hw53LfQpm2OFLaOlA63Yn0Ui5Ub06jlWkaMimdaOVLtmXLZMlhMq3EtUh+Zkk+VNTMtHzKFElyN5ZEzmesySprLIrEiqTE5XK2OTfK2lgAJuRdju1gwPe0jwVRPcptyVVdpZW8Y3+ZafiEl8hBSp39jp/GScbtfcnubn4c1RT7GvD2e68f+ITLLtZ/Z64P9eCx7RIPkhZ40o+yiL0NQPZk+CoKfCqm7QvREUPOE8R287we0hefc4acx1huLc9o8W9E+bU9gS1cJZ0eVRlr0syRMmvSrXrRbMzOsfNmSomTAPWwkUlOmh7plo6ZNdIsGRRoNMWfKkXvWjnpJz0bLI1mz3KY8lIvUy/6bf+0KDuerL5HKA2mlIwc9jB+wFzv+QSWbLVEv7s6uFX/qmdnlBxniA16Nx/nCE/qKcVGU3t1tiga0+894d8ELOGhO1UnR1DXdV45h7dnyVW8rebpa4ysGomQe678wdxse9W3lGj0kZbt1tO4jUuRU0wrKcscBpo8LHfaxB4EYFe4TcJKS6PE4qUWmeeopri6WbInGcmQHUcxwOhcTzb9V21juI8wue2RaWq1WRUkcKylxbTHYkW2kTUSLOkV2xd1DnSLBkTfSLBkRshUi5kSbnpIyLR0ijZdGoVF3EBoJcSAANZJNgB3r0FmpkltFRNa4gaNhdI72j05D44dygHJXmW5z21czbNH5DTtOrSngOrvOOwKbZ0TmaRlDCcX2dO4dSMY48T9N64mdfzfBel+zrYtPBcn2LZkwlzJal4s6okc4e4CQ35+AQpDTwBjGsaLNaA0DcALBYXNHBVcnKdG5j9PCLvHps9dv1++3rIQBGMrZGhyhCS0NJIs9hwvwducNjlTWceY89K5xY18kQ14fiM98DWPaGHYr0r8jOD9LTuDJOs3qP7Rv8AvimwytFIdHVM0Mo1F2A/a764dqupvlU9xK7K1P2ecmy3W2kV55b5L6aou7mt5x68Z0b+8jou7wolV8izwfw53gbnxh3mw/JdWGfW/q8CjxmVzpFgyKes5GZycaiMDhHJddjJ3Iky95p5n8GNbGPE3KseZUuyFjsquMFzg1oLnE2DWglxPADEqy8yeSlznNlrW2AxbTbTuM5GoewO/cp9knNakoWFzWRRC3SkJ6R96R2KbTZzyTkxZPj52x1Q4WibxF9Z7fApG7OlJah4GIUKPljzLuXW0zRFE3SVL7COJo1bAXAamjdw7Sls2cgf2djnyHn1Ep50smvH1RwH3ssZBzZbT3e5xlqH+nM7XjrDdw++C7S5wwCEIQAIQhAAkKuhZK3myMa4cR8DsQhAHFdms6M3pqiWL2D02eB/qm9TWV0HpOpZBvIe0+QshCAGf+LqrUI6a/bJ9E7jblCf9amib7DXOd/MEIQSKwZkRl3PqZZal3+Y48z+EfWykMEDWNDWNa1o1NaAAOwBCEECiEIQAIQhAH//2Q==" />
			</div>
			<br/>
			
			<select r:context="test" r:name="itemCode" r:selectedItem="item" r:required="true"
					r:items="items" r:itemKey="code" r:itemLabel="caption"
					r:emptyText="-- Select Item --" r:allowNull="true">
			</select>
			<label r:context="test" r:depends="item">Selected: #{itemCode}</label>
			<button r:context="test" r:name="showSelected" r:immediate="true">Show Selected Value</button>
			
			<ul r:context="test" r:items="items" r:name="selected">
				<li>#{code} - #{caption}</li>
			</ul>
			
			<div r:controller="test"></div>
			<hr/>
			
			<div id="content"></div>
		</div>
	</body>

</html>
