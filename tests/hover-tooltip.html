<!DOCTYPE html>
<html>
	<head>
		<link href="../js/css/rameses-lib.css" rel="stylesheet" />
		
		<script src="../js/jquery-all.js"></script>
		<script src="../js/rameses-ext-lib.js"></script>
		<script src="../js/rameses-ui.js"></script>
		
		<script src="../js/plugins/infobox.js"></script>

		<style>
			body, table, p { 
				font-family: arial, verdana, sans-serif; 
				font-size: 12px;
				line-height: 1.45em;
			}
			.hr { 
				height:0; line-height:0; 
				border-top:solid 1px #ccc; clear:both; 
				margin: 4px 0; 
			}
			.left { float:left; }
			.clear { clear:both; }
			
			.infobox {
				background: #fff;
				position:absolute;border:solid 1px #ccc; 
				padding: 5px; overflow: auto; zoom: 1;
				box-shadow: 0 2px 4px #bbb;
			}
		</style>
		
		<script>
			$(function(){
				var infobox = $('#infobox');
				$('.members a').each(function(i,a) {
					$(a).mouseover(function() {
						if( $(a).data('info') ) return;
						
						var ib = infobox.clone(true).removeAttr('id').insertAfter(infobox);
						var loc = getLocation(a);
						var css = {left:loc.x + $(a).width() - 3, top:loc.y};
						ib.show().css(css).mouseout(function(e){ 
							if(e.relatedTarget == this || e.relatedTarget == a || $(e.relatedTarget).parents('.infobox')[0] == this ) return;
							$(this).remove();
							$(a).removeData('info');
						});
						$(a).data('info', ib);
					})
					.mouseout(function(e){
						var ib = $(a).data('info');
						console.log( e );
						if( ib && (ib[0] == e.relatedTarget || $(e.relatedTarget).parents('.infobox')[0] == ib[0] )) return;
						if( ib ) {
							ib.remove();
							$(a).removeData('info',ib);
						}
					});
				});
			});
			
			function getLocation(e) {
				var x=0,y=0;
				while(e) {
					x+=e.offsetLeft;
					y+=e.offsetTop;
					e = e.offsetParent;
				}
				return {x:x, y:y};
			}
		</script>
	</head>

	<body>
		<div class="members" style="margin-top: 50px;">
			<a href="#">Student 1</a><br/>
			<a href="#">Student 2</a><br/>
			<a href="#">Student 3</a><br/>
		</div>
		
		<div id="infobox" class="infobox" style="display:none">
			<div class="left" style="width:50px;height:50px;background:#eee;text-align:center;border:1px solid gray;box-shadow:0 1px 1px #bbb;">
				Image Here
			</div>
			<div class="left" style="width:200px;margin-left: 5px;">
				<b>Lastname, Firstname</b>
				<div class="hr"></div>
				<div>
					Description of the person.
					Description of the person.
					Description of the person.
					Description of the person.
				</div>
			</div>
			<div class="clear"></div>
			<div class="hr"></div>
			<div class="clear" style="text-align:right">
				<button>Message</button>
				<button>Remove</button>
			</div>
		</div>
	</body>

</html>
