<html>
	<head>
		<script src="../js/jquery-all.js"></script>
		<script src="../js/rameses-lib.js"></script>

		<style>
			body, table { font: 10pt/145% 'arial', 'verdana'; }
			th { background: gray; color: #fff; }
			tr.odd td { background: #e3e3e3; }
			
			tr.selected td { background: #323232; color: #ffffbb; }
		</style>
		
		<script type="text/javascript">
			//--- console support for IE
			if( !window.console ) {
				var div = $('<div></div>');
				$(function(){ div.appendTo('body').before('<hr/>'); });
				
				window.console = { 
					log: function(msg){ 
						//$('<pre></pre>').text(msg).appendTo(div).after('<hr/>'); 
					}
				};
			}
		</script>
		
		<script type="text/javascript">			
			$put( "profile",
				new function() {
				
					var _this = this;

					this.list = [
						{id: '001', firstname:"elmo", lastname:"nazareno", category: 'A', sales: 100.00},
						{id: '002', firstname:"jess", lastname:"zamora", category: 'A', sales: 120.00},
						{id: '003', firstname:"worgie", lastname:"flores", category: 'A', sales: 80.00},
						{id: '004', firstname:"michael", lastname:"ramos", category: 'B', sales: 90.00},
						{id: '005', firstname:"johana", lastname:"cardona", category: 'B', sales: 70.00},
						{id: '006', firstname:"chariss", lastname:"villarosa", category: 'B', sales: 77.00},
						{id: '007', firstname:"rojean", lastname:"vergara", category: 'C', sales: 99.00},
						{id: '008', firstname:"robert", lastname:"yap", category: 'C', sales: 444.00},
						{id: '009', firstname:"james", lastname:"yap", category: 'C', sales: 33.00},
						{id: '010', firstname:"loren", lastname:"pedrito", category: 'D', sales: 20.00}
					];
					
					this.cityList;
					
					this.countryList = [
						'PH', 'US', 'JP'
					];
					
					this.propertyChangeListener = {
						'country' : function(o) {
							_this.cityList = [];
							if( o == 'PH' )
								_this.cityList = ['Cebu', 'Talisay', 'Manila'];
							else if( o == 'US' )
								_this.cityList = ['Covina', 'Vallejo'];
						}
					};
					
					this.save = function() {
						alert('Record posted successfully.');
					};
					
				}
			);
		</script>

	</head>
	<body>
		<select name="country" context="profile" items="countryList" emptyText="Select Country" allowNull="true" required="true"></select>
		<select name="city" context="profile" items="cityList" depends="country" emptyText="Select City" allowNull="true" required="true"></select>
		<br/>
		<input type="button" context="profile" name="save" value="Save"/>
		<br/>
		<br/>
		<table context="profile" items="list" varName="item" varStatus="stat"
		       border="1" cellpadding="3" cellspacing="0" width="400"
		       script="if( stat.total ) stat.total += item.sales; else stat.total = item.sales;">
			<thead>
				<th style="text-align: center">Id</th>
				<th>First Name</th>
				<th>Last Name</th>
				<th>Sales</th>
				<th>Total Sales</th>
			</thead>
			<tbody>
				<tr selectable="false" styleExpr="#{stat.prevItem.category != item.category? '' : 'display: none'}; background: #369; color: #fff;">
					<td colspan="6" >${item.category}</td>
				</tr>
				<tr class="#{stat.index%2==0? 'even' : 'odd'}">
					<td width="50" align="center" name="item.id">
					<td name="item.firstname" style=""></td>
					<td name="item.lastname"></td>
					<td name="item.sales"></td>
					<td name="stat.total"></td>
				</tr>
			</tbody>
		</table>
		
	</body>

</html>
