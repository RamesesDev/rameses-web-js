<script>
	$put(
		'popup',
		new function() {
		
			var self = this;
			this._controller;
		
			this.propertyChangeListener = {
				'item': function( val ) {
					if( val == 'blue' ) {
						self.list = [
							{type:'standard', caption:'Color 1'},
							{type:'standard', caption:'Color 2'},
							{type:'custom', caption:'Color 3'},
							{type:'custom', caption:'Color 4'}
						];
					}
					else {
						self.list = [
							{type:'custom', caption:'Color 1'},
							{type:'standard', caption:'Color 2'},
							{type:'custom', caption:'Color 3'},
							{type:'standard', caption:'Color 4'}
						];
					}
					self._controller.refresh();
				}
			};

			this.item;
			this.list = [];
			this.handler;
			
			this.select = function() {
				if( this.handler ) {
					this.handler( this.item );
				}
				return '_close';
			}		
		}
	);
	
</script>
		
<div style="border: solid 1px lightgrey">
	<h3>Select Item</h3>
	<label r:context="popup">Selected: #{item}</label>
	<br/>
	<select r:context="popup" r:name="item">
		<option value="blue">Blue</option>
		<option value="red">Red</option>
		<option value="green">Green</option>
		<option value="pink">Pink</option>
		<option value="neon">Neon</option>
	</select>
	<br/>
	<table r:context="popup" r:items="list" r:varStatus="stat">
		<tbody>
			<tr>
				<td>
					<input type="radio" r:context="popup" r:name="list[#{stat.index}].type" value="standard" /> Standard
					<input type="radio" r:context="popup" r:name="list[#{stat.index}].type" value="custom" /> Custom
					-
					#{caption}
				</td>
			</tr>
		</tbody>
	</table>
	<button r:context="popup" r:name="select">Select</button>
</div>
