<html>

	<head>
		<script type="text/javascript">
			if( !window.console ) window.console = { log: function(msg){  }};
		</script>
		<script src="../js/jquery-all.js"></script>
		<script src="../js/rameses-ext-lib.js"></script>
		<script src="../js/rameses-ui.js"></script>

		<style>
			body, table { font: 10pt/145% 'arial', 'verdana'; }
		
			table { border: solid 1px gray; }
			table th { text-align: left; }
			table tr.even td { 
				background: #ddd; 
				border-top: solid 1px #ddd; border-bottom: solid 1px #ddd; 
			}
			table tr.odd td  { 
				background: #fff; 
				border-top: solid 1px #fff; border-bottom: solid 1px #fff; 
			}
			table tr.selected td { background: navy; color: #fff; }
			table tr.selected td * { color: #fff; }
			
			table tr.selected td.selected,
			table tr.selected td.selected * { 
				background: #ffff99; color: #000; 
			}

			.present { border: solid 1px green !important; };
			.absent { border: solid 1px red !important; };

		</style>
		<script>
			$put( "profile",
				new function() {
				
					this.entry = {};
					
					this.addRecord = function() {
						alert('adding record');
						alert( this.model.isEmpty() );
						studentList.push( this.entry );
						this.entry = {};
						this.model.refresh( true );
					};
				
					this.username = "Jayrome";

					var studentList = [
						{id: '001', firstname:"elmo", lastname:"nazareno", checked: true},
						{id: '002', firstname:"jess", lastname:"zamora", checked: true},
						{id: '003', firstname:"worgie", lastname:"flores"},
						{id: '004', firstname:"michael", lastname:"ramos"}
					];
					
					this.list = studentList;
					this.selectedItem = studentList[0];
					
					this.model = {
						rows: 8,
						fetchList: function( p ) {
							return [];
							//return studentList.slice(p._start, p._start + p._limit);
						}
					};
					
					var studentList2 = [
						{id: '001', firstname:"elmo", lastname:"nazareno", checked: true},
						{id: '002', firstname:"jess", lastname:"zamora", checked: true},
						{id: '003', firstname:"worgie", lastname:"flores"},
						{id: '004', firstname:"michael", lastname:"ramos"},
						{id: '005', firstname:"johana", lastname:"cardona"}
					];
									
					this.model2 = {
						fetchList: function( p ) {
							return studentList2;
						}
					};					

					this.next = function() { 
						this.model.moveNext(); 
					};
					
					this.back = function() { 
						this.model.movePrev(); 
					};
					
					this.showSelected = function() {
						alert( this.model.getSelectedItem().firstname );
					};
					
					this.showSelectedList = function() {
						var names = [];
						$( this.model.getSelectedItems() ).each(function(i,e){ names.push( e.firstname); });
						alert( names.join(', ') );
					}
					
					this.markPresent = function() {
						$( this.model.getSelectedItems() ).each(function(i,e){ e.remarks = 'present'; });
						this.model.refresh(true);
					}
					
					this.markAbsent = function() {
						$( this.model.getSelectedItems() ).each(function(i,e){ e.remarks = 'absent'; });
						this.model.refresh(true);
					}

				}
			);
		</script>

	</head>
	<body>
		<label r:context="profile">
			Welcome <b>${username}</b>
		</label>
		
		<div style="float: right; width: 500px;">
			<table id="list_1" r:context="profile" r:name="selectedItem" r:model="model" r:varName="item" r:varStatus="stat" cellpadding="3" 
				   cellspacing="0" width="100%">
				<thead>
					<th>&nbsp;</th>
					<th style="text-align: center">Id</th>
					<th>First Name</th>
					<th>Last Name</th>
					<th>Gender</th>
					<th>Civil Status</th>
					<th>Remarks</th>
				</thead>
				<tbody>
					<tr class="${stat.index%2==0? 'even' : 'odd'}">
						<td width="30">
							<input type="checkbox" r:context="profile" r:name="list[#{stat.index}].selected"/>
						</td>
						<td width="50" align="center">
							<a href="view.php?id=${item.id}">${item.id}</a>
						</td>
						<td r:name="item.firstname" editable="true"></td>
						<td r:name="item.lastname" editable="true"></td>
						<td r:name="item.remarks" class="${item.remarks}"></td>
						<td>#{item.gender}</td>
						<td>#{item.civilStatus}</td>
						<td>#{item.remarks}</td>
					</tr>
				</tbody>
			</table>
			
			<br/>
			<input type="button" r:context="profile"  r:name="back" value="Back"/>
			<input type="button" r:context="profile"  r:name="next" value="Next"/>
			<br/>
			
			<input type="button" r:context="profile"  r:name="markPresent" value="Mark Present"/>
			<input type="button" r:context="profile"  r:name="markAbsent" value="Mark Absent"/>
			<br/>
			
			<input type="button" r:context="profile" r:name="showSelected" value="Show Selected"/>
			<input type="button" r:context="profile" r:name="showSelectedList" value="Show Selected List"/>
			<br/>
			<br/>
			
			<table id="list_2" r:context="profile" r:model="model2" r:varName="item" r:varStatus="stat" cellpadding="3" 
				   cellspacing="0" width="100%">
				<thead>
					<th>&nbsp;</th>
					<th style="text-align: center">Id</th>
					<th>First Name</th>
					<th>Last Name</th>
					<th>Remarks</th>
				</thead>
				<tbody>
					<tr class="${stat.index%2==0? 'even' : 'odd'}">
						<td width="30">
							<input type="checkbox" />
						</td>
						<td width="50" align="center">
							<a href="view.php?id=${item.id}">${item.id}</a>
						</td>
						<td r:name="item.firstname" editable="true"></td>
						<td r:name="item.lastname" editable="true"></td>
						<td r:name="item.remarks" class="${item.remarks}"></td>
					</tr>
				</tbody>
			</table>
			
			<br/><br/>
			
			<ul r:context="profile" r:items="list" r:varName="item">
				<li>#{item.lastname}, #{item.firstname}</li>
			</ul>
		</div>
		
		
		<br/>
		ID: <input type="text" r:context="profile" r:name="entry.id" /><br/>
		Firstname: <input type="text" r:context="profile" r:name="entry.firstname" /><br/>
		Lastname: <input type="text" r:context="profile" r:name="entry.lastname" /><br/>
		Gender: 
		<label>
			<input type="radio" value="male" r:context="profile" r:name="entry.gender">
			Male
		</label>
		<label>
			<input type="radio" value="female" r:context="profile" r:name="entry.gender">
			Female
		</label>
		<br/>
		Civil Status:
		<select r:context="profile" r:name="entry.civilStatus">
			<option value="single">SINGLE</option>
			<option value="married">MARRIED</option>
			<option value="widow">WIDOW</option>
		</select>
		<br/>
		Remarks:
		<textarea r:context="profile" r:name="entry.remarks"></textarea>
		<br/>
		Selected:
		<input type="checkbox" r:context="profile" r:name="entry.selected" />
		<br/>		
		
		<input type="button" r:context="profile" r:name="addRecord" value="Add Item"/>
		
	</body>
</html>
