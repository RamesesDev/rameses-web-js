<script>								
	$put( "curriculum",
		new function(){
			var svc = ProxyService.lookup('CurriculumService');
			var name = "curriculum";

			this.list = [];
			this.entity = {};
			this.searchParam = {};
			this.mode = "create";
			
			this.onload = function(){
				this.list = svc.getList(this.searchParam);					
			}				
			
			this.save = function(){					
				if(this.mode == "create"){																
					this.entity = svc.create(this.entity);						
					this.list.push(this.entity);
				}
				else{
					this.entity = svc.update(this.entity);
					this.onload();
				}
				alert("Record Saved"); 
				this.mode = "create";
				this.entity = {};
				return"_close";
			}

			this.edit = function(objid){
				this.entity = svc.read({"objid":objid});										
				this.mode = "edit";
				$get(name).navigate(new PopupOpener(name, "modules/curriculum/curriculum_form.htm", "dialog"));					
			}

			this.delete = function(objid){
				if(confirm('Are you sure you want to delete this record?')){
					svc.delete({"objid":objid});
					this.onload();							
					$get(name).refresh();
				}
			}

			this.create=function(){
				this.entity={};
				this.mode="create";
				return new PopupOpener(name, "modules/curriculum/curriculum_form.htm", "dialog");
			};

			this.search=function(){
				this.searchParam = {};
				return new PopupOpener(name, "modules/curriculum/curriculum_search.htm", "dialog");									
			};

			this.display=function(){					
				this.searchParam = {};
				this.onload();
			};
	});
</script>

<input type="button" context="curriculum" name="create" value="Add Record" immediate="true"/>			
<input type="button" context="curriculum" name="search" value="Search Record" immediate="true"/>	
<input type="button" context="curriculum" name="display" value="Display Records" immediate="true"/>

<div style="height:20px"></div>

<table class="list" context="curriculum" items="list" varStatus="status" >
	<thead align="left">
		<tr>
			<th class="list-column-first">No.</th>
			<th class="list-column">Role</th>
			<th class="list-column">Program Code</th>	            
			<th class="list-column">Program Name</th>
			<th class="list-column">Revised Year</th>
			<th class="list-column">Status</th>	 
			<th class="list-column-last">Actions</th>	
		</tr>
	</thead>
	<tbody>
		<tr class="#{status.index%2==0?'list-row-even':'list-row-odd'}">
			<td>${status.index+1}</td>
			<td name="role"></td>
			<td name="progcode"></td>
			<td name="progname"></td>
			<td name="revyear"></td>
			<td name="status"></td>					
			<td>
				<a href="#" onclick="$ctx('curriculum').edit('#{objid}'); return false;"><img  style="border: 0px; height:20px;" src="pics/edit.png" title="Edit"></a>
				<a href="#" onclick="$ctx('curriculum').delete('#{objid}'); return false;"><img style="border: 0px; height:25px;" src="pics/delete.png" title="Delete"></a>
			</td>	            
		</tr>
	</tbody>
</table>

<div id="dialog" title="Curriculum Record"><div>

